---
draft: fale
emoji: 🚙
title: 開発日記-2024-07-27 / monorepoでルートの.envを共有する
slug: diary-2024-07-27
published_at: 2024-07-27 11:17:09
modified_at: 2024-07-27 11:17:09
tags:
  - npm
  - dotenv-cli
preview: null
type: default
---

## monorepoでルートの.envを共有する

```text
.
├── packages
│   ├── package1
│   └── package2
├── apps
│   └── next
│      ├── src
│      └── package.json
└── .env
```

上記のような構成の `./apps/next` のNext.jsのローカルサーバーを `pnpm dev` で起動した場合に、`.env` の環境変数を参照（`process.env.XXXX`）したい場合の方法。stackoverflowに答えがあった。

::link-card[https://stackoverflow.com/questions/75058474/how-to-use-both-root-and-app-level-env-files-with-turborepo]

以下はコマンドとpackage.jsonの修正内容メモ。

```sh:Terminal
pnpm add -w -D -E dotenv-cli
```

```json:apps/next/package.json
{
  "scripts": {
    "dev": "pnpm with-env next dev",
    "with-env": "dotenv -e ../../.env --"
  },
}
```

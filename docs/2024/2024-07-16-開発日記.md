---
draft: false
emoji: ğŸ»
title: é–‹ç™ºæ—¥è¨˜-2024-07-16 | Clerkã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ã¤ã¾ã¥ã„ãŸ
slug: diary-2024-07-16
published_at: 2024-07-16 21:20:07
modified_at: 2024-07-17 20:48:28
tags:
  - é–‹ç™ºæ—¥è¨˜
preview: null
type: default
---

## Clerk 5.2.3ã‚’ä½¿ã†ã¨Next.jsã®ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹

::link-card[https://github.com/clerk/javascript/issues/3660]

Issueã‚’èª­ã‚€ã€‚

```typescript
'use server'

import { auth } from '@clerk/nextjs/server'
```

~~`@clerk/nextjs/server` ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã« `'use server'` ã‚’è¿½åŠ ã—ãŸã‚‰æ”¹å–„ã—ãŸã€‚~~

~~`@clerk/nextjs/server` ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ä½¿ç”¨ã—ãªã„ã¨ã„ã‘ãªã„ã¨ã„ã†ã“ã¨ã§ã€`'use client'` ã«ã¯ã—ã¦ã„ãªã‹ã£ãŸãŒã€`'use server'` ã¨æ˜ç¤ºã—ãªã„ã¨ã„ã‘ãªã„ã‚ˆã†ã ã€‚ãŠãã‚‰ãã€‚~~

(7/17ä¿®æ­£)

> The "use server" annotation exposes an end point that makes all exported functions invokable by the client. The identifiers is currently a hash of the source code location. As long as a user gets the handle to the id of an action, it can invoke it with any arguments.
>
> [ç¿»è¨³]  
> ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³"use server"ã¯ã€ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸã™ã¹ã¦ã®é–¢æ•°ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒå‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å…¬é–‹ã—ã¾ã™ã€‚è­˜åˆ¥å­ã¯ç¾åœ¨ã€ã‚½ãƒ¼ã‚¹ ã‚³ãƒ¼ãƒ‰ã®å ´æ‰€ã®ãƒãƒƒã‚·ãƒ¥ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã® ID ã¸ã®ãƒãƒ³ãƒ‰ãƒ«ã‚’å–å¾—ã—ã¦ã„ã‚‹é™ã‚Šã€ä»»æ„ã®å¼•æ•°ã§ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚
>
> https://nextjs.org/blog/security-nextjs-server-components-actions#write

`'use server'` ã¯ä¸Šè¨˜ã®ã‚ˆã†ãªä»•æ§˜ãªã®ã§ã€ä¸ç”¨æ„ã«ä½¿ã‚ãªã„ã‚ˆã†ã«ã—ã¦ `import 'server-only'` ã‚’ä½¿ã†ã‚ˆã†ã«ã™ã‚‹ã€‚

```sh:Terminal
pnpm add -E server-only
```

```typescript
import 'server-only'

import { auth } from '@clerk/nextjs/server'
```

ã“ã†ã™ã‚‹ã“ã¨ã§ã€`'use server'` ã‚’ä½¿ã†ã¹ãã¨ã“ã‚ã§ä½¿ã£ã¦ã„ãªã‹ã£ãŸã“ã¨ãŒã‚¨ãƒ©ãƒ¼ã§ã‚ã‹ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

## Unknown at rule @tailwindscss(unknownAtRules) å¯¾ç­–

> Unknown at rule @tailwindscss(unknownAtRules)

VS Codeã§CSSãƒ•ã‚¡ã‚¤ãƒ«ã®Tailwind CSSã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®éƒ¨åˆ†(`@tailwind base;`ãªã©)ã§ãƒ¯ãƒ¼ãƒ‹ãƒ³ã‚°ãŒå‡ºã‚‹å ´åˆã®å¯¾å¿œæ–¹æ³•ã€‚

```json:.vscode/settings.json
"files.associations": {
  "*.css": "tailwindcss",
  "*.scss": "tailwindcss"
},
```
